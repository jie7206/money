2020-01-09 12:50:18 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path= is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path= instead.

Randomized with seed 59611

连外测试(Currencies)
  列表显示
    #164[系统层]导航列中点击更新火币能自动更新火币所有账号的资产余额 (FAILED - 1)
    #170[系统层]通过止盈价快速下单后能将获取的下单单号显示在列表中 (FAILED - 2)
    #166[系统层]更新火币时能自动抓取历史交易记录填入交易列表中 (FAILED - 3)
    #162[系统层]当更新汇率后能一并更新所有模型的数值记录 (FAILED - 4)
    #144[系统层]更新比特币汇率之前能先更新USDT的汇率 (FAILED - 5)
    #149[系统层]更新汇率时能按照数字符号更新所有数字货币的汇率 (FAILED - 6)
    #172[系统层]若止盈下单成功卖出后能在交易列表中显示已实现损益 (FAILED - 7)
    #151[系统层]导航链接能直接更新汇率然后返回最后查看的页面 (FAILED - 8)
    #127[系统层]在货币列表中点击更新匯率能更新比特币的汇率值 (FAILED - 9)
    #176[系统层]将火币资产与报价改成调用Python来获取并更新数据库 (FAILED - 10)
    #129[系统层]在货币列表中点击更新匯率能更新所有法币的汇率值 (FAILED - 11)

模型测试(DealRecord)
  基本验证
    #165[模型层]成交价、成交量必须是正数否则显示错误讯息
    #165[模型层]交易记录若没有币种、成交价、成交量则无法新建

系统测试(DealRecords)
  管理员登入
    #177新增下单链接并能选择买卖种类及显示目前仓位大小
    #167[系统层]修正清空某币之后无法将其资产归零的问题
    #165[系统层]能通过表单删除一笔交易记录 (FAILED - 12)
    #178下单时输入数量并按下试算能显示成交后的仓位最后能成功送出订单
    #169[系统层]点击止盈价或止损价能快速自动下单卖出
    #165[系统层]能更新交易记录属性

模型测试(Record)
  基本验证
    #160[模型层]数值记录若没有模型名称物件编号和数值则无法新建
    #160[模型层]数值不为数字时能显示错误讯息

系统测试(Records)
  一般登入
    #161[系统层]访问资产负债表时能自动写入资产净值到数值记录表 (FAILED - 13)

系统测试(Items)
  商品列表
    #163[系统层]导航列中点击更新房价能从赶集网自动更新房价 (FAILED - 14)
    #136[系统层]能在商品列表的单价和数量直接输入值后按回车更新 (FAILED - 15)
    #135[系统层]商品列表能显示对应资产的单价和数量 (FAILED - 16)
    #142[系统层]点击商品列表中的报价网址能直接打开网页查看报价 (FAILED - 17)
  修改与删除商品
    成功用例
      #135[系统层]能通过表单修改单价 (FAILED - 18)
      #139[系统层]由资产列表更新商品返回资产列表否则返回商品列表 (FAILED - 19)
      #135[系统层]能通过表单删除一笔商品记录 (FAILED - 20)
      #135[系统层]能通过表单修改对应的资产 (FAILED - 21)
      #135[系统层]能通过表单修改数量 (FAILED - 22)
    失败用例
      #135[系统层]当商品没有数量时无法更新且显示错误讯息 (FAILED - 23)
      #135[系统层]当商品单价不为数字时无法更新且显示错误讯息 (FAILED - 24)
      #135[系统层]当商品单价为负数时无法更新且显示错误讯息 (FAILED - 25)
      #135[系统层]当商品数量为负数时无法更新且显示错误讯息 (FAILED - 26)
      #135[系统层]当商品数量不为数字时无法更新且显示错误讯息 (FAILED - 27)
      #135[系统层]当商品没有单价时无法更新且显示错误讯息 (FAILED - 28)
  以管理员登入
    #141[系统层]管理员在新建商品时可看到隐藏资产以供选择 (FAILED - 29)
  新增商品
    失败用例
      #135[系统层]当商品数量不为数字时无法新建且显示错误讯息 (FAILED - 30)
      #135[系统层]当商品单价为负数时无法新建且显示错误讯息 (FAILED - 31)
      #135[系统层]当商品单价不为数字时无法新建且显示错误讯息 (FAILED - 32)
      #135[系统层]当商品没有单价时无法新建且显示错误讯息 (FAILED - 33)
      #135[系统层]当商品数量为负数时无法新建且显示错误讯息 (FAILED - 34)
      #135[系统层]当商品没有数量时无法新建且显示错误讯息 (FAILED - 35)
    成功用例
      #140[系统层]用户在新建商品时不能看到隐藏资产以供选择 (FAILED - 36)
      #135[系统层]能通过商品表单成功建立一笔商品记录 (FAILED - 37)

系统测试(Properties)
  新增资产
    失败用例
      当资产名称过长时无法新建且显示错误讯息 (FAILED - 38)
      当资产金额不为数字时无法新建且显示错误讯息 (FAILED - 39)
      当资产没有名称时无法新建且显示错误讯息 (FAILED - 40)
      当资产没有金额时无法新建且显示错误讯息 (FAILED - 41)
    成功用例
      能通过表单新增一笔资产记录 (FAILED - 42)
  列表显示
    #115[系统层]资产能按照等值台币大小由高到低排序 (FAILED - 43)
    #117[系统层]一般的登入在资产列表中看不到隐藏的资产 (FAILED - 44)
    #188更新资产金额时能自动将逗号去掉 (FAILED - 45)
    #125[系统层]资产列表能列出各资产的占比 (FAILED - 46)
    #143[系统层]资产列表能显示3月底以来资产净值平均月增减额度 (FAILED - 47)
    #154[系统层]资产列表能显示法币汇率数字货币显示报价 (FAILED - 48)
    #114[系统层]资产列表能显示以人民币计算的资产总净值 (FAILED - 49)
    #111[系统层]能在资产列表的金额栏位中直接输入值后按回车更新 (FAILED - 50)
    #123[系统层]资产列表中除了比特币资产以小数点8位显示外其余为小数点2位 (FAILED - 51)
    #108[系统层]能在资产列表中显示包含利息的资产总净值 (FAILED - 52)
    #110[系统层]资产列表增加一栏位显示资产的利息值 (FAILED - 53)
    #138[系统层]资产若有商品则不显示输入表单而显示编辑链接 (FAILED - 54)
    #150[系统层]若资产为数字货币默认金额显示小数点8位否则显示2位 (FAILED - 55)
  修改与删除资产
    成功用例
      能通过表单删除一笔资产记录 (FAILED - 56)
      #188更新资产金额时能自动将逗号去掉 (FAILED - 57)
      能通过表单修改资产的金额 (FAILED - 58)
      能通过表单修改资产的名称 (FAILED - 59)
    失败用例
      当资产没有金额时无法更新且显示错误讯息 (FAILED - 60)
      当资产没有名称时无法更新且显示错误讯息 (FAILED - 61)
      #130[系统层]非管理员无法编辑隐藏资产 (FAILED - 62)
      #131[系统层]在网址输入不存在的资产ID则会在列表中显示错误 (FAILED - 63)
      当资产名称过长时无法更新且显示错误讯息 (FAILED - 64)
      当资产金额不为数字时无法更新且显示错误讯息 (FAILED - 65)
  以管理员登入
    #122[系统层]以管理员登入才可以将资产设为隐藏的资产 (FAILED - 66)
    #145[系统层]在资产编辑页面中能对资产添加分类标签 (FAILED - 67)
    #121[系统层]以管理员登入才能看到包含隐藏资产的总净值 (FAILED - 68)
    #119[系统层]以管理员登入可以在资产列表中看到隐藏的资产 (FAILED - 69)
    #132[系统层]管理员可以编辑并更新隐藏资产 (FAILED - 70)
    #126[系统层]一般登入与管理员看到的资产占比是不同的 (FAILED - 71)
    #156[系统层]通过资产组合更新了资产标签后应返回该资产组合而不是首页 (FAILED - 72)

模型测试(Interest)
  #106[模型层]利息的利率必须不为负数否则会产生错误讯息
  #105[模型层]利息起算日必须是日期形态否则会产生错误讯息
  #104[模型层]利息没有对应资产、起算日和利率则无法新建并能显示错误讯息

模型测试(Currency)
  #92[模型层]货币汇率值不大于零时能显示错误讯息
  货币若无名称、代码和汇率值则无法建立并能显示错误讯息
  货币名称、代码不能超过15个字元并能显示错误讯息
  #146[模型层]货币增加数字符号属性以分辨该币是否为法币
  #128[模型层]货币模型能显示某币种兑换美元的汇率值

系统测试(Currencies)
  新增货币
    成功用例
      能通过表单新增一笔货币记录 (FAILED - 73)
    失败用例
      当货币没有代码时无法新建且显示错误讯息 (FAILED - 74)
      当货币没有名称时无法新建且显示错误讯息 (FAILED - 75)
      当货币名称过长时无法新建且显示错误讯息 (FAILED - 76)
      #93[系统层]货币汇率值不为正数时无法新建且显示错误讯息 (FAILED - 77)
      当货币没有汇率值时无法新建且显示错误讯息 (FAILED - 78)
      当货币汇率值不为数字时无法新建且显示错误讯息 (FAILED - 79)
      当货币代码过长时无法新建且显示错误讯息 (FAILED - 80)
  修改与删除货币
    成功用例
      能通过表单修改货币的名称 (FAILED - 81)
      能通过表单修改货币的代码 (FAILED - 82)
      能通过表单删除一笔货币记录 (FAILED - 83)
      能通过表单修改货币的汇率值 (FAILED - 84)
    失败用例
      #147[系统层]非管理员看不到数字货币的符号属性 (FAILED - 85)
      当货币名称过长时无法更新且显示错误讯息 (FAILED - 86)
      当货币没有汇率值时无法更新且显示错误讯息 (FAILED - 87)
      当货币没有代码时无法更新且显示错误讯息 (FAILED - 88)
      当货币汇率值不为数字时无法更新且显示错误讯息 (FAILED - 89)
      当货币没有名称时无法更新且显示错误讯息 (FAILED - 90)
      当货币代码过长时无法更新且显示错误讯息 (FAILED - 91)
  以管理员登入
    #147[系统层]只有管理员能设定数字货币的符号属性 (FAILED - 92)

模型测试(Portfolio)
  基本验证
    #152[模型层]名称和标签若过长则无法新建
    #152[模型层]资产组合若没有名称、包含标签及排序号码则无法新建
    #157[模型层]资产组合新增模式属性以便能支持所有法币资产的查看
    #152[模型层]排序号码不大于零时能显示错误讯息

系统测试(Portfolios)
  以管理员登入
    修改与删除资产组合
      失败用例
        #152[系统层]当资产组合没有名称时无法新建且显示错误讯息 (FAILED - 93)
        #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息 (FAILED - 94)
        #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息 (FAILED - 95)
        #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息 (FAILED - 96)
      成功用例
        #152[系统层]能通过表单修改排除标签 (FAILED - 97)
        #152[系统层]能通过表单修改排序号码 (FAILED - 98)
        #152[系统层]能通过表单修改包含标签 (FAILED - 99)
        #152[系统层]能通过表单删除一笔资产组合记录 (FAILED - 100)
        #152[系统层]能通过表单修改名称 (FAILED - 101)
    资产组合列表
      #152[系统层]资产组合列表能显示组合名称、包含标签及排除标签 (FAILED - 102)
      #155[系统层]在资产组合列表中点击查看能显示该组合的资产列表 (FAILED - 103)
      需要先有标签的资产
        #168[系统层]当有标签参数时所显示的资产列表中的占比必须相对于该列表 (FAILED - 104)
        #159[系统层]按下更新组合链接能更新所有资产组合的栏位值 (FAILED - 105)
        #158[系统层]点击查看资产组合能记录等值台币等值人民币与资产占比讯息 (FAILED - 106)
        #153[系统层]在标签页中更新资产金额后能回到该标签页 (FAILED - 107)
    新增资产组合
      失败用例
        #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息 (FAILED - 108)
        #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息 (FAILED - 109)
        #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息 (FAILED - 110)
        #152[系统层]当资产组合没有名称时无法新建且显示错误讯息 (FAILED - 111)
      成功用例
        #152[系统层]能通过资产组合表单成功建立一笔资产组合记录 (FAILED - 112)
  非管理员登入
    #152[系统层]非管理员则无法显示资产组合编辑页面 (FAILED - 113)

模型测试(Property)
  基本验证
    #99[模型层]资产若没有关联的货币种类则无法新建
    资产名称不能超过30个字元并能显示错误讯息
    #101[模型层]每笔资产的金额能换算成其他币种
    #100[模型层]资产若没有关联的货币种类则无法更新
    资产金额非数字形态能显示错误讯息
    资产若无名称和金额则无法新建并能显示错误讯息
  进阶验证
    #103[模型层]汇率更新后所有资产的总值也能相应更新
    #120[模型层]资产模型能计算不包含隐藏资产的总净值
    #116[模型层]资产附加隐藏属性且一般列表中看不到它
    #102[模型层]资产能以新台币或其他币种结算所有资产的总值
    #124[模型层]资产模型能计算各资产占总资产比例(正负资产分开)

系统测试(Interests)
  以管理员登入
    #141[系统层]管理员在新建利息时可看到隐藏资产以供选择 (FAILED - 114)
  新增利息
    失败用例
      #109[系统层]当利息没有利率值时无法新建且显示错误讯息 (FAILED - 115)
      #109[系统层]当利息为负数时无法新建且显示错误讯息 (FAILED - 116)
      #109[系统层]当起算日格式不符时无法新建且显示错误讯息 (FAILED - 117)
      #109[系统层]当利息没有起算日时无法新建且显示错误讯息 (FAILED - 118)
    成功用例
      #107[系统层]能通过利息表单成功建立一笔利息记录 (FAILED - 119)
      #140[系统层]用户在新建利息时不能看到隐藏资产以供选择 (FAILED - 120)
  修改与删除利息
    成功用例
      #109[系统层]能通过表单修改利率值 (FAILED - 121)
      #109[系统层]能通过表单删除一笔利息记录 (FAILED - 122)
      #109[系统层]能通过表单修改起算日 (FAILED - 123)
      #109[系统层]能通过表单修改对应的资产 (FAILED - 124)
    失败用例
      #109[系统层]当起算日格式不符时无法更新且显示错误讯息 (FAILED - 125)
      #109[系统层]当利息没有利率值时无法更新且显示错误讯息 (FAILED - 126)
      #109[系统层]当利息为负数时无法更新且显示错误讯息 (FAILED - 127)
      #109[系统层]当利息没有起算日时无法更新且显示错误讯息 (FAILED - 128)
  利息列表
    #112[系统层]利息列表能显示对应资产的利息值、币别和等值台币 (FAILED - 129)
    #113[系统层]利息列表下方能以新台币和人民币显示利息的总金额 (FAILED - 130)

模型测试(Item)
  进阶验证
    #137[模型层]当商品的数量更新则对应的资产金额也会更新
    #137[模型层]当商品的单价更新则对应的资产金额也会更新
  基本验证
    #134[模型层]商品单价或数量不能为负数否则显示错误讯息
    #133[模型层]商品若没有对应资产、单价和数量则无法新建并能显示错误

系统测试(Main)
  登入与登出功能测试
    正确输入PIN码之后跳转回根目录 (FAILED - 131)
    #118[系统层]以管理员密码能正常登入和登出系统 (FAILED - 132)
    点击页面的登出链接即可安全登出 (FAILED - 133)
    PIN码输入错误之后会提示错误讯息

Failures:

  1) 连外测试(Currencies) 列表显示 #164[系统层]导航列中点击更新火币能自动更新火币所有账号的资产余额
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  2) 连外测试(Currencies) 列表显示 #170[系统层]通过止盈价快速下单后能将获取的下单单号显示在列表中
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  3) 连外测试(Currencies) 列表显示 #166[系统层]更新火币时能自动抓取历史交易记录填入交易列表中
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  4) 连外测试(Currencies) 列表显示 #162[系统层]当更新汇率后能一并更新所有模型的数值记录
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  5) 连外测试(Currencies) 列表显示 #144[系统层]更新比特币汇率之前能先更新USDT的汇率
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  6) 连外测试(Currencies) 列表显示 #149[系统层]更新汇率时能按照数字符号更新所有数字货币的汇率
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  7) 连外测试(Currencies) 列表显示 #172[系统层]若止盈下单成功卖出后能在交易列表中显示已实现损益
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  8) 连外测试(Currencies) 列表显示 #151[系统层]导航链接能直接更新汇率然后返回最后查看的页面
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  9) 连外测试(Currencies) 列表显示 #127[系统层]在货币列表中点击更新匯率能更新比特币的汇率值
     Failure/Error: where('auto_sell = 0').first.earn_or_loss

     NoMethodError:
       undefined method `earn_or_loss' for nil:NilClass



     # ./app/models/deal_record.rb:132:in `first_profit'
     # ./app/controllers/deal_records_controller.rb:18:in `index'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
     # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
     # ./spec/support/methods.rb:12:in `login_as_admin'
     # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  10) 连外测试(Currencies) 列表显示 #176[系统层]将火币资产与报价改成调用Python来获取并更新数据库
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  11) 连外测试(Currencies) 列表显示 #129[系统层]在货币列表中点击更新匯率能更新所有法币的汇率值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/currencies_ext_spec.rb:7:in `block (2 levels) in <main>'

  12) 系统测试(DealRecords) 管理员登入 #165[系统层]能通过表单删除一笔交易记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:39:in `follow'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:228:in `follow_link'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:71:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/system/deal_records_spec.rb:23:in `block (3 levels) in <main>'

  13) 系统测试(Records) 一般登入 #161[系统层]访问资产负债表时能自动写入资产净值到数值记录表
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/records_spec.rb:7:in `block (3 levels) in <main>'

  14) 系统测试(Items) 商品列表 #163[系统层]导航列中点击更新房价能从赶集网自动更新房价
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  15) 系统测试(Items) 商品列表 #136[系统层]能在商品列表的单价和数量直接输入值后按回车更新
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  16) 系统测试(Items) 商品列表 #135[系统层]商品列表能显示对应资产的单价和数量
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  17) 系统测试(Items) 商品列表 #142[系统层]点击商品列表中的报价网址能直接打开网页查看报价
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  18) 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改单价
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  19) 系统测试(Items) 修改与删除商品 成功用例 #139[系统层]由资产列表更新商品返回资产列表否则返回商品列表
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  20) 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单删除一笔商品记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  21) 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改对应的资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  22) 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改数量
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  23) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品没有数量时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  24) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品单价不为数字时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  25) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品单价为负数时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  26) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品数量为负数时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  27) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品数量不为数字时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  28) 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品没有单价时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  29) 系统测试(Items) 以管理员登入 #141[系统层]管理员在新建商品时可看到隐藏资产以供选择
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  30) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品数量不为数字时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  31) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品单价为负数时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  32) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品单价不为数字时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  33) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品没有单价时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  34) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品数量为负数时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  35) 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品没有数量时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  36) 系统测试(Items) 新增商品 成功用例 #140[系统层]用户在新建商品时不能看到隐藏资产以供选择
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  37) 系统测试(Items) 新增商品 成功用例 #135[系统层]能通过商品表单成功建立一笔商品记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/items_spec.rb:7:in `block (2 levels) in <main>'

  38) 系统测试(Properties) 新增资产 失败用例 当资产名称过长时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  39) 系统测试(Properties) 新增资产 失败用例 当资产金额不为数字时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  40) 系统测试(Properties) 新增资产 失败用例 当资产没有名称时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  41) 系统测试(Properties) 新增资产 失败用例 当资产没有金额时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  42) 系统测试(Properties) 新增资产 成功用例 能通过表单新增一笔资产记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  43) 系统测试(Properties) 列表显示 #115[系统层]资产能按照等值台币大小由高到低排序
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  44) 系统测试(Properties) 列表显示 #117[系统层]一般的登入在资产列表中看不到隐藏的资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  45) 系统测试(Properties) 列表显示 #188更新资产金额时能自动将逗号去掉
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  46) 系统测试(Properties) 列表显示 #125[系统层]资产列表能列出各资产的占比
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  47) 系统测试(Properties) 列表显示 #143[系统层]资产列表能显示3月底以来资产净值平均月增减额度
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  48) 系统测试(Properties) 列表显示 #154[系统层]资产列表能显示法币汇率数字货币显示报价
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  49) 系统测试(Properties) 列表显示 #114[系统层]资产列表能显示以人民币计算的资产总净值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  50) 系统测试(Properties) 列表显示 #111[系统层]能在资产列表的金额栏位中直接输入值后按回车更新
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  51) 系统测试(Properties) 列表显示 #123[系统层]资产列表中除了比特币资产以小数点8位显示外其余为小数点2位
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  52) 系统测试(Properties) 列表显示 #108[系统层]能在资产列表中显示包含利息的资产总净值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  53) 系统测试(Properties) 列表显示 #110[系统层]资产列表增加一栏位显示资产的利息值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  54) 系统测试(Properties) 列表显示 #138[系统层]资产若有商品则不显示输入表单而显示编辑链接
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  55) 系统测试(Properties) 列表显示 #150[系统层]若资产为数字货币默认金额显示小数点8位否则显示2位
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  56) 系统测试(Properties) 修改与删除资产 成功用例 能通过表单删除一笔资产记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  57) 系统测试(Properties) 修改与删除资产 成功用例 #188更新资产金额时能自动将逗号去掉
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  58) 系统测试(Properties) 修改与删除资产 成功用例 能通过表单修改资产的金额
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  59) 系统测试(Properties) 修改与删除资产 成功用例 能通过表单修改资产的名称
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  60) 系统测试(Properties) 修改与删除资产 失败用例 当资产没有金额时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  61) 系统测试(Properties) 修改与删除资产 失败用例 当资产没有名称时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  62) 系统测试(Properties) 修改与删除资产 失败用例 #130[系统层]非管理员无法编辑隐藏资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  63) 系统测试(Properties) 修改与删除资产 失败用例 #131[系统层]在网址输入不存在的资产ID则会在列表中显示错误
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  64) 系统测试(Properties) 修改与删除资产 失败用例 当资产名称过长时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  65) 系统测试(Properties) 修改与删除资产 失败用例 当资产金额不为数字时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  66) 系统测试(Properties) 以管理员登入 #122[系统层]以管理员登入才可以将资产设为隐藏的资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  67) 系统测试(Properties) 以管理员登入 #145[系统层]在资产编辑页面中能对资产添加分类标签
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  68) 系统测试(Properties) 以管理员登入 #121[系统层]以管理员登入才能看到包含隐藏资产的总净值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  69) 系统测试(Properties) 以管理员登入 #119[系统层]以管理员登入可以在资产列表中看到隐藏的资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  70) 系统测试(Properties) 以管理员登入 #132[系统层]管理员可以编辑并更新隐藏资产
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  71) 系统测试(Properties) 以管理员登入 #126[系统层]一般登入与管理员看到的资产占比是不同的
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  72) 系统测试(Properties) 以管理员登入 #156[系统层]通过资产组合更新了资产标签后应返回该资产组合而不是首页
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/properties_spec.rb:7:in `block (2 levels) in <main>'

  73) 系统测试(Currencies) 新增货币 成功用例 能通过表单新增一笔货币记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  74) 系统测试(Currencies) 新增货币 失败用例 当货币没有代码时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  75) 系统测试(Currencies) 新增货币 失败用例 当货币没有名称时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  76) 系统测试(Currencies) 新增货币 失败用例 当货币名称过长时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  77) 系统测试(Currencies) 新增货币 失败用例 #93[系统层]货币汇率值不为正数时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  78) 系统测试(Currencies) 新增货币 失败用例 当货币没有汇率值时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  79) 系统测试(Currencies) 新增货币 失败用例 当货币汇率值不为数字时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  80) 系统测试(Currencies) 新增货币 失败用例 当货币代码过长时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  81) 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的名称
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  82) 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的代码
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  83) 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单删除一笔货币记录
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  84) 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的汇率值
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  85) 系统测试(Currencies) 修改与删除货币 失败用例 #147[系统层]非管理员看不到数字货币的符号属性
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  86) 系统测试(Currencies) 修改与删除货币 失败用例 当货币名称过长时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  87) 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有汇率值时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  88) 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有代码时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  89) 系统测试(Currencies) 修改与删除货币 失败用例 当货币汇率值不为数字时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  90) 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有名称时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  91) 系统测试(Currencies) 修改与删除货币 失败用例 当货币代码过长时无法更新且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  92) 系统测试(Currencies) 以管理员登入 #147[系统层]只有管理员能设定数字货币的符号属性
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:5:in `login_as_guest'
      # ./spec/system/currencies_spec.rb:8:in `block (2 levels) in <main>'

  93) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有名称时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  94) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  95) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  96) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  97) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改排除标签
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  98) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改排序号码
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  99) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改包含标签
      Failure/Error: where('auto_sell = 0').first.earn_or_loss

      NoMethodError:
        undefined method `earn_or_loss' for nil:NilClass



      # ./app/models/deal_record.rb:132:in `first_profit'
      # ./app/controllers/deal_records_controller.rb:18:in `index'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
      # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
      # ./spec/support/methods.rb:12:in `login_as_admin'
      # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  100) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单删除一笔资产组合记录
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  101) 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改名称
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  102) 系统测试(Portfolios) 以管理员登入 资产组合列表 #152[系统层]资产组合列表能显示组合名称、包含标签及排除标签
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  103) 系统测试(Portfolios) 以管理员登入 资产组合列表 #155[系统层]在资产组合列表中点击查看能显示该组合的资产列表
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  104) 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #168[系统层]当有标签参数时所显示的资产列表中的占比必须相对于该列表
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  105) 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #159[系统层]按下更新组合链接能更新所有资产组合的栏位值
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  106) 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #158[系统层]点击查看资产组合能记录等值台币等值人民币与资产占比讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  107) 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #153[系统层]在标签页中更新资产金额后能回到该标签页
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  108) 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  109) 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  110) 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  111) 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有名称时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  112) 系统测试(Portfolios) 以管理员登入 新增资产组合 成功用例 #152[系统层]能通过资产组合表单成功建立一笔资产组合记录
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:12:in `login_as_admin'
       # ./spec/system/portfolios_spec.rb:9:in `block (3 levels) in <main>'

  113) 系统测试(Portfolios) 非管理员登入 #152[系统层]非管理员则无法显示资产组合编辑页面
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/portfolios_spec.rb:206:in `block (3 levels) in <main>'

  114) 系统测试(Interests) 以管理员登入 #141[系统层]管理员在新建利息时可看到隐藏资产以供选择
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  115) 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息没有利率值时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  116) 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息为负数时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  117) 系统测试(Interests) 新增利息 失败用例 #109[系统层]当起算日格式不符时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  118) 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息没有起算日时无法新建且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  119) 系统测试(Interests) 新增利息 成功用例 #107[系统层]能通过利息表单成功建立一笔利息记录
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  120) 系统测试(Interests) 新增利息 成功用例 #140[系统层]用户在新建利息时不能看到隐藏资产以供选择
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  121) 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改利率值
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  122) 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单删除一笔利息记录
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  123) 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改起算日
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  124) 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改对应的资产
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  125) 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当起算日格式不符时无法更新且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  126) 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息没有利率值时无法更新且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  127) 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息为负数时无法更新且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  128) 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息没有起算日时无法更新且显示错误讯息
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  129) 系统测试(Interests) 利息列表 #112[系统层]利息列表能显示对应资产的利息值、币别和等值台币
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  130) 系统测试(Interests) 利息列表 #113[系统层]利息列表下方能以新台币和人民币显示利息的总金额
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/support/methods.rb:5:in `login_as_guest'
       # ./spec/system/interests_spec.rb:9:in `block (2 levels) in <main>'

  131) 系统测试(Main) 登入与登出功能测试 正确输入PIN码之后跳转回根目录
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/system/main_spec.rb:12:in `block (3 levels) in <main>'

  132) 系统测试(Main) 登入与登出功能测试 #118[系统层]以管理员密码能正常登入和登出系统
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/system/main_spec.rb:37:in `block (3 levels) in <main>'

  133) 系统测试(Main) 登入与登出功能测试 点击页面的登出链接即可安全登出
       Failure/Error: where('auto_sell = 0').first.earn_or_loss

       NoMethodError:
         undefined method `earn_or_loss' for nil:NilClass



       # ./app/models/deal_record.rb:132:in `first_profit'
       # ./app/controllers/deal_records_controller.rb:18:in `index'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/tempfile_reaper.rb:15:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/etag.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/head.rb:12:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:232:in `context'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/session/abstract/id.rb:226:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:38:in `call_app'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/method_override.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/runtime.rb:22:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/engine.rb:524:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:68:in `block in call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `each'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/urlmap.rb:53:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-2.0.7/lib/rack/builder.rb:153:in `call'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/mock_session.rb:29:in `request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:266:in `process_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:129:in `custom_request'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/rack-test-1.1.0/lib/rack/test.rb:58:in `get'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:65:in `process'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:52:in `block in process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `times'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:47:in `process_and_follow_redirects'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/browser.rb:33:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/form.rb:43:in `submit'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:74:in `click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/rack_test/node.rb:128:in `block (2 levels) in <class:Node>'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:167:in `block in click'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `block in perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/base.rb:83:in `synchronize'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:594:in `perform_click_action'
       # /Users/lin/.rvm/gems/ruby-2.6.3/gems/capybara-3.29.0/lib/capybara/node/element.rb:166:in `click'
       # ./spec/system/main_spec.rb:26:in `block (3 levels) in <main>'

Finished in 17.39 seconds (files took 2.21 seconds to load)
170 examples, 133 failures

Failed examples:

rspec ./spec/system/currencies_ext_spec.rb:39 # 连外测试(Currencies) 列表显示 #164[系统层]导航列中点击更新火币能自动更新火币所有账号的资产余额
rspec ./spec/system/currencies_ext_spec.rb:47 # 连外测试(Currencies) 列表显示 #170[系统层]通过止盈价快速下单后能将获取的下单单号显示在列表中
rspec ./spec/system/currencies_ext_spec.rb:43 # 连外测试(Currencies) 列表显示 #166[系统层]更新火币时能自动抓取历史交易记录填入交易列表中
rspec ./spec/system/currencies_ext_spec.rb:35 # 连外测试(Currencies) 列表显示 #162[系统层]当更新汇率后能一并更新所有模型的数值记录
rspec ./spec/system/currencies_ext_spec.rb:23 # 连外测试(Currencies) 列表显示 #144[系统层]更新比特币汇率之前能先更新USDT的汇率
rspec ./spec/system/currencies_ext_spec.rb:27 # 连外测试(Currencies) 列表显示 #149[系统层]更新汇率时能按照数字符号更新所有数字货币的汇率
rspec ./spec/system/currencies_ext_spec.rb:51 # 连外测试(Currencies) 列表显示 #172[系统层]若止盈下单成功卖出后能在交易列表中显示已实现损益
rspec ./spec/system/currencies_ext_spec.rb:31 # 连外测试(Currencies) 列表显示 #151[系统层]导航链接能直接更新汇率然后返回最后查看的页面
rspec ./spec/system/currencies_ext_spec.rb:15 # 连外测试(Currencies) 列表显示 #127[系统层]在货币列表中点击更新匯率能更新比特币的汇率值
rspec ./spec/system/currencies_ext_spec.rb:55 # 连外测试(Currencies) 列表显示 #176[系统层]将火币资产与报价改成调用Python来获取并更新数据库
rspec ./spec/system/currencies_ext_spec.rb:19 # 连外测试(Currencies) 列表显示 #129[系统层]在货币列表中点击更新匯率能更新所有法币的汇率值
rspec ./spec/system/deal_records_spec.rb:21 # 系统测试(DealRecords) 管理员登入 #165[系统层]能通过表单删除一笔交易记录
rspec ./spec/system/records_spec.rb:9 # 系统测试(Records) 一般登入 #161[系统层]访问资产负债表时能自动写入资产净值到数值记录表
rspec ./spec/system/items_spec.rb:33 # 系统测试(Items) 商品列表 #163[系统层]导航列中点击更新房价能从赶集网自动更新房价
rspec ./spec/system/items_spec.rb:18 # 系统测试(Items) 商品列表 #136[系统层]能在商品列表的单价和数量直接输入值后按回车更新
rspec ./spec/system/items_spec.rb:13 # 系统测试(Items) 商品列表 #135[系统层]商品列表能显示对应资产的单价和数量
rspec ./spec/system/items_spec.rb:29 # 系统测试(Items) 商品列表 #142[系统层]点击商品列表中的报价网址能直接打开网页查看报价
rspec ./spec/system/items_spec.rb:131 # 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改单价
rspec ./spec/system/items_spec.rb:151 # 系统测试(Items) 修改与删除商品 成功用例 #139[系统层]由资产列表更新商品返回资产列表否则返回商品列表
rspec ./spec/system/items_spec.rb:145 # 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单删除一笔商品记录
rspec ./spec/system/items_spec.rb:124 # 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改对应的资产
rspec ./spec/system/items_spec.rb:138 # 系统测试(Items) 修改与删除商品 成功用例 #135[系统层]能通过表单修改数量
rspec ./spec/system/items_spec.rb:175 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品没有数量时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:181 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品单价不为数字时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:187 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品单价为负数时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:199 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品数量为负数时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:193 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品数量不为数字时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:169 # 系统测试(Items) 修改与删除商品 失败用例 #135[系统层]当商品没有单价时无法更新且显示错误讯息
rspec ./spec/system/items_spec.rb:213 # 系统测试(Items) 以管理员登入 #141[系统层]管理员在新建商品时可看到隐藏资产以供选择
rspec ./spec/system/items_spec.rb:90 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品数量不为数字时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:96 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品单价为负数时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:84 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品单价不为数字时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:72 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品没有单价时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:102 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品数量为负数时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:78 # 系统测试(Items) 新增商品 失败用例 #135[系统层]当商品没有数量时无法新建且显示错误讯息
rspec ./spec/system/items_spec.rb:60 # 系统测试(Items) 新增商品 成功用例 #140[系统层]用户在新建商品时不能看到隐藏资产以供选择
rspec ./spec/system/items_spec.rb:50 # 系统测试(Items) 新增商品 成功用例 #135[系统层]能通过商品表单成功建立一笔商品记录
rspec ./spec/system/properties_spec.rb:132 # 系统测试(Properties) 新增资产 失败用例 当资产名称过长时无法新建且显示错误讯息
rspec ./spec/system/properties_spec.rb:138 # 系统测试(Properties) 新增资产 失败用例 当资产金额不为数字时无法新建且显示错误讯息
rspec ./spec/system/properties_spec.rb:120 # 系统测试(Properties) 新增资产 失败用例 当资产没有名称时无法新建且显示错误讯息
rspec ./spec/system/properties_spec.rb:126 # 系统测试(Properties) 新增资产 失败用例 当资产没有金额时无法新建且显示错误讯息
rspec ./spec/system/properties_spec.rb:102 # 系统测试(Properties) 新增资产 成功用例 能通过表单新增一笔资产记录
rspec ./spec/system/properties_spec.rb:44 # 系统测试(Properties) 列表显示 #115[系统层]资产能按照等值台币大小由高到低排序
rspec ./spec/system/properties_spec.rb:48 # 系统测试(Properties) 列表显示 #117[系统层]一般的登入在资产列表中看不到隐藏的资产
rspec ./spec/system/properties_spec.rb:32 # 系统测试(Properties) 列表显示 #188更新资产金额时能自动将逗号去掉
rspec ./spec/system/properties_spec.rb:60 # 系统测试(Properties) 列表显示 #125[系统层]资产列表能列出各资产的占比
rspec ./spec/system/properties_spec.rb:71 # 系统测试(Properties) 列表显示 #143[系统层]资产列表能显示3月底以来资产净值平均月增减额度
rspec ./spec/system/properties_spec.rb:82 # 系统测试(Properties) 列表显示 #154[系统层]资产列表能显示法币汇率数字货币显示报价
rspec ./spec/system/properties_spec.rb:39 # 系统测试(Properties) 列表显示 #114[系统层]资产列表能显示以人民币计算的资产总净值
rspec ./spec/system/properties_spec.rb:25 # 系统测试(Properties) 列表显示 #111[系统层]能在资产列表的金额栏位中直接输入值后按回车更新
rspec ./spec/system/properties_spec.rb:53 # 系统测试(Properties) 列表显示 #123[系统层]资产列表中除了比特币资产以小数点8位显示外其余为小数点2位
rspec ./spec/system/properties_spec.rb:16 # 系统测试(Properties) 列表显示 #108[系统层]能在资产列表中显示包含利息的资产总净值
rspec ./spec/system/properties_spec.rb:21 # 系统测试(Properties) 列表显示 #110[系统层]资产列表增加一栏位显示资产的利息值
rspec ./spec/system/properties_spec.rb:64 # 系统测试(Properties) 列表显示 #138[系统层]资产若有商品则不显示输入表单而显示编辑链接
rspec ./spec/system/properties_spec.rb:75 # 系统测试(Properties) 列表显示 #150[系统层]若资产为数字货币默认金额显示小数点8位否则显示2位
rspec ./spec/system/properties_spec.rb:180 # 系统测试(Properties) 修改与删除资产 成功用例 能通过表单删除一笔资产记录
rspec ./spec/system/properties_spec.rb:173 # 系统测试(Properties) 修改与删除资产 成功用例 #188更新资产金额时能自动将逗号去掉
rspec ./spec/system/properties_spec.rb:166 # 系统测试(Properties) 修改与删除资产 成功用例 能通过表单修改资产的金额
rspec ./spec/system/properties_spec.rb:159 # 系统测试(Properties) 修改与删除资产 成功用例 能通过表单修改资产的名称
rspec ./spec/system/properties_spec.rb:202 # 系统测试(Properties) 修改与删除资产 失败用例 当资产没有金额时无法更新且显示错误讯息
rspec ./spec/system/properties_spec.rb:190 # 系统测试(Properties) 修改与删除资产 失败用例 当资产没有名称时无法更新且显示错误讯息
rspec ./spec/system/properties_spec.rb:214 # 系统测试(Properties) 修改与删除资产 失败用例 #130[系统层]非管理员无法编辑隐藏资产
rspec ./spec/system/properties_spec.rb:220 # 系统测试(Properties) 修改与删除资产 失败用例 #131[系统层]在网址输入不存在的资产ID则会在列表中显示错误
rspec ./spec/system/properties_spec.rb:196 # 系统测试(Properties) 修改与删除资产 失败用例 当资产名称过长时无法更新且显示错误讯息
rspec ./spec/system/properties_spec.rb:208 # 系统测试(Properties) 修改与删除资产 失败用例 当资产金额不为数字时无法更新且显示错误讯息
rspec ./spec/system/properties_spec.rb:247 # 系统测试(Properties) 以管理员登入 #122[系统层]以管理员登入才可以将资产设为隐藏的资产
rspec ./spec/system/properties_spec.rb:286 # 系统测试(Properties) 以管理员登入 #145[系统层]在资产编辑页面中能对资产添加分类标签
rspec ./spec/system/properties_spec.rb:242 # 系统测试(Properties) 以管理员登入 #121[系统层]以管理员登入才能看到包含隐藏资产的总净值
rspec ./spec/system/properties_spec.rb:237 # 系统测试(Properties) 以管理员登入 #119[系统层]以管理员登入可以在资产列表中看到隐藏的资产
rspec ./spec/system/properties_spec.rb:275 # 系统测试(Properties) 以管理员登入 #132[系统层]管理员可以编辑并更新隐藏资产
rspec ./spec/system/properties_spec.rb:262 # 系统测试(Properties) 以管理员登入 #126[系统层]一般登入与管理员看到的资产占比是不同的
rspec ./spec/system/properties_spec.rb:298 # 系统测试(Properties) 以管理员登入 #156[系统层]通过资产组合更新了资产标签后应返回该资产组合而不是首页
rspec ./spec/system/currencies_spec.rb:20 # 系统测试(Currencies) 新增货币 成功用例 能通过表单新增一笔货币记录
rspec ./spec/system/currencies_spec.rb:42 # 系统测试(Currencies) 新增货币 失败用例 当货币没有代码时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:36 # 系统测试(Currencies) 新增货币 失败用例 当货币没有名称时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:54 # 系统测试(Currencies) 新增货币 失败用例 当货币名称过长时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:72 # 系统测试(Currencies) 新增货币 失败用例 #93[系统层]货币汇率值不为正数时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:48 # 系统测试(Currencies) 新增货币 失败用例 当货币没有汇率值时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:66 # 系统测试(Currencies) 新增货币 失败用例 当货币汇率值不为数字时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:60 # 系统测试(Currencies) 新增货币 失败用例 当货币代码过长时无法新建且显示错误讯息
rspec ./spec/system/currencies_spec.rb:95 # 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的名称
rspec ./spec/system/currencies_spec.rb:102 # 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的代码
rspec ./spec/system/currencies_spec.rb:116 # 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单删除一笔货币记录
rspec ./spec/system/currencies_spec.rb:109 # 系统测试(Currencies) 修改与删除货币 成功用例 能通过表单修改货币的汇率值
rspec ./spec/system/currencies_spec.rb:162 # 系统测试(Currencies) 修改与删除货币 失败用例 #147[系统层]非管理员看不到数字货币的符号属性
rspec ./spec/system/currencies_spec.rb:132 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币名称过长时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:150 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有汇率值时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:138 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有代码时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:156 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币汇率值不为数字时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:126 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币没有名称时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:144 # 系统测试(Currencies) 修改与删除货币 失败用例 当货币代码过长时无法更新且显示错误讯息
rspec ./spec/system/currencies_spec.rb:178 # 系统测试(Currencies) 以管理员登入 #147[系统层]只有管理员能设定数字货币的符号属性
rspec ./spec/system/portfolios_spec.rb:168 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有名称时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:174 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:180 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:192 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 失败用例 #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:152 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改排除标签
rspec ./spec/system/portfolios_spec.rb:141 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改排序号码
rspec ./spec/system/portfolios_spec.rb:147 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改包含标签
rspec ./spec/system/portfolios_spec.rb:158 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单删除一笔资产组合记录
rspec ./spec/system/portfolios_spec.rb:134 # 系统测试(Portfolios) 以管理员登入 修改与删除资产组合 成功用例 #152[系统层]能通过表单修改名称
rspec ./spec/system/portfolios_spec.rb:15 # 系统测试(Portfolios) 以管理员登入 资产组合列表 #152[系统层]资产组合列表能显示组合名称、包含标签及排除标签
rspec ./spec/system/portfolios_spec.rb:21 # 系统测试(Portfolios) 以管理员登入 资产组合列表 #155[系统层]在资产组合列表中点击查看能显示该组合的资产列表
rspec ./spec/system/portfolios_spec.rb:55 # 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #168[系统层]当有标签参数时所显示的资产列表中的占比必须相对于该列表
rspec ./spec/system/portfolios_spec.rb:49 # 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #159[系统层]按下更新组合链接能更新所有资产组合的栏位值
rspec ./spec/system/portfolios_spec.rb:40 # 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #158[系统层]点击查看资产组合能记录等值台币等值人民币与资产占比讯息
rspec ./spec/system/portfolios_spec.rb:30 # 系统测试(Portfolios) 以管理员登入 资产组合列表 需要先有标签的资产 #153[系统层]在标签页中更新资产金额后能回到该标签页
rspec ./spec/system/portfolios_spec.rb:113 # 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有包含标签时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:101 # 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合排序号码不为大于零的数字时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:95 # 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有排序号码时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:89 # 系统测试(Portfolios) 以管理员登入 新增资产组合 失败用例 #152[系统层]当资产组合没有名称时无法新建且显示错误讯息
rspec ./spec/system/portfolios_spec.rb:75 # 系统测试(Portfolios) 以管理员登入 新增资产组合 成功用例 #152[系统层]能通过资产组合表单成功建立一笔资产组合记录
rspec ./spec/system/portfolios_spec.rb:208 # 系统测试(Portfolios) 非管理员登入 #152[系统层]非管理员则无法显示资产组合编辑页面
rspec ./spec/system/interests_spec.rb:172 # 系统测试(Interests) 以管理员登入 #141[系统层]管理员在新建利息时可看到隐藏资产以供选择
rspec ./spec/system/interests_spec.rb:66 # 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息没有利率值时无法新建且显示错误讯息
rspec ./spec/system/interests_spec.rb:78 # 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息为负数时无法新建且显示错误讯息
rspec ./spec/system/interests_spec.rb:72 # 系统测试(Interests) 新增利息 失败用例 #109[系统层]当起算日格式不符时无法新建且显示错误讯息
rspec ./spec/system/interests_spec.rb:60 # 系统测试(Interests) 新增利息 失败用例 #109[系统层]当利息没有起算日时无法新建且显示错误讯息
rspec ./spec/system/interests_spec.rb:38 # 系统测试(Interests) 新增利息 成功用例 #107[系统层]能通过利息表单成功建立一笔利息记录
rspec ./spec/system/interests_spec.rb:48 # 系统测试(Interests) 新增利息 成功用例 #140[系统层]用户在新建利息时不能看到隐藏资产以供选择
rspec ./spec/system/interests_spec.rb:117 # 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改利率值
rspec ./spec/system/interests_spec.rb:124 # 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单删除一笔利息记录
rspec ./spec/system/interests_spec.rb:110 # 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改起算日
rspec ./spec/system/interests_spec.rb:103 # 系统测试(Interests) 修改与删除利息 成功用例 #109[系统层]能通过表单修改对应的资产
rspec ./spec/system/interests_spec.rb:146 # 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当起算日格式不符时无法更新且显示错误讯息
rspec ./spec/system/interests_spec.rb:140 # 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息没有利率值时无法更新且显示错误讯息
rspec ./spec/system/interests_spec.rb:152 # 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息为负数时无法更新且显示错误讯息
rspec ./spec/system/interests_spec.rb:134 # 系统测试(Interests) 修改与删除利息 失败用例 #109[系统层]当利息没有起算日时无法更新且显示错误讯息
rspec ./spec/system/interests_spec.rb:16 # 系统测试(Interests) 利息列表 #112[系统层]利息列表能显示对应资产的利息值、币别和等值台币
rspec ./spec/system/interests_spec.rb:22 # 系统测试(Interests) 利息列表 #113[系统层]利息列表下方能以新台币和人民币显示利息的总金额
rspec ./spec/system/main_spec.rb:7 # 系统测试(Main) 登入与登出功能测试 正确输入PIN码之后跳转回根目录
rspec ./spec/system/main_spec.rb:34 # 系统测试(Main) 登入与登出功能测试 #118[系统层]以管理员密码能正常登入和登出系统
rspec ./spec/system/main_spec.rb:23 # 系统测试(Main) 登入与登出功能测试 点击页面的登出链接即可安全登出

Randomized with seed 59611

